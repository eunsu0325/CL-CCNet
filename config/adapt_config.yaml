# config/adapt_config.yaml - W2ML 제거된 단순 버전
# CoCoNut Stage 2: Continual Learning with Intelligent Replay Buffer

# =================================================================
# DESIGN PHILOSOPHY (단순화됨)
# =================================================================
Design_Documentation:
  philosophy: "Intelligent Replay Buffer for Continual Palmprint Recognition"
  core_innovation: "Diversity-based sample selection with Faiss acceleration"
  main_contribution: "Memory-efficient continual learning without forgetting"
  loss_strategy: "Basic SupCon for stable continual learning"
  buffer_strategy: "Faiss-optimized diversity-based replay"
  scientific_basis: "Proven SupCon + Novel replay buffer design"

# =================================================================
# DATASET CONFIGURATION
# =================================================================
Dataset:
  type: "palmprint"
  height: 128
  width: 128
  use_angle_normalization: false
  # 온라인 적응용 데이터 경로
  dataset_path: "./data/test_tongji.txt"

# =================================================================
# MODEL CONFIGURATION (CCNet)
# =================================================================
PalmRecognizer:
  architecture: "CCNet"
  num_classes: 600
  com_weight: 0.8
  feature_dimension: 2048
  learning_rate: 0.001
  batch_size: 10
  # Stage 1에서 학습된 가중치 로드
  load_weights_folder: "./results/checkpoint/net_params_best.pth"

# =================================================================
# CONTINUAL LEARNER CONFIGURATION (단순화됨)
# =================================================================
ContinualLearner:
  adaptation: true
  adaptation_epochs: 3
  sync_frequency: 10
  replay_weight: 1.0
  new_data_weight: 1.0
  intermediate_save_frequency: 50
  learning_rate: 0.001
  batch_size: 10

# =================================================================
# REPLAY BUFFER CONFIGURATION (핵심 기여)
# =================================================================
ReplayBuffer:
  maximize_diversity: true
  max_buffer_size: 1000
  similarity_threshold: 0.85
  storage_path: "./results/replay_buffer/"
  feature_extraction_for_diversity: true
  enable_smart_sampling: true
  diversity_update_frequency: 10
  model_save_path: "./results/models/"

# =================================================================
# LOSS CONFIGURATION (단순화됨)
# =================================================================
Loss:
  temp: 0.07
  type: "SupConLoss"
  # Stage 1 하이브리드 손실 (참고용)
  weight1: 0.8  # ArcFace
  weight2: 0.2  # SupCon

# W2ML_Experiment 섹션 완전 제거

# =================================================================
# MODEL SAVING CONFIGURATION
# =================================================================
ModelSaving:
  final_save_path: "/content/drive/MyDrive/CoCoNut_STAR"
  intermediate_save_frequency: 100
  enable_intermediate_save: true
  include_timestamp: true
  auto_generate_readme: true